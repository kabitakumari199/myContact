{"ast":null,"code":"import api from \"./api\"; //calls the login API\n\nexport function login(username, password) {\n  return dispatch => {\n    // const userInfo = {\n    //     email:email,\n    //     password:password\n    // }\n    // dispatch({ type: 'LOGIN_USER', payload:{email:email,password:password} });\n    // const token = \"dfasdfkasjdfkajsdkfjsk\";\n    // localStorage.setItem(\"user-token\", token);\n    fetch(api + '/user/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: username,\n        password: password\n      })\n    }).then(response => response.json()).then(responseData => {\n      console.log(responseData);\n\n      if (responseData.error) {\n        alert('Invalid Login Credentials, Check your email or password!!!!');\n      } else {\n        const token = responseData.data.token;\n        const userinfo = responseData.data.userInfo.email.userinfo;\n        localStorage.setItem(\"user-token\", token);\n        dispatch({\n          type: 'LOGIN_USER',\n          userinfo\n        });\n      }\n    }).catch(err => {\n      alert('Network Issue');\n    });\n  };\n}\nexport function logout() {\n  return dispatch => {\n    dispatch({\n      type: 'LOGOUT_USER',\n      payload: {\n        logout: false\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/var/www/html/my-contact/src/actions/loginAction.js"],"names":["api","login","username","password","dispatch","fetch","method","headers","body","JSON","stringify","then","response","json","responseData","console","log","error","alert","token","data","userinfo","userInfo","email","localStorage","setItem","type","catch","err","logout","payload"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,OAAhB,C,CAEA;;AACA,OAAO,SAASC,KAAT,CAAeC,QAAf,EAAyBC,QAAzB,EAAmC;AAEtC,SAAQC,QAAD,IAAc;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,KAAK,CACDL,GAAG,GAAC,aADH,EAED;AACIM,MAAAA,MAAM,EAAE,MADZ;AAEIC,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX,OAFb;AAKIC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBR,QAAAA,QAAQ,EAAEA,QADO;AAEjBC,QAAAA,QAAQ,EAAEA;AAFO,OAAf;AALV,KAFC,CAAL,CAaKQ,IAbL,CAaUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAbtB,EAcKF,IAdL,CAcUG,YAAY,IAAI;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,YAAZ;;AACA,UAAIA,YAAY,CAACG,KAAjB,EAAwB;AACpBC,QAAAA,KAAK,CAAC,6DAAD,CAAL;AACH,OAFD,MAEO;AAAA,cACKC,KADL,GACeL,YAAY,CAACM,IAD5B,CACKD,KADL;AAAA,cAEKE,QAFL,GAEkBP,YAAY,CAACM,IAAb,CAAkBE,QAAlB,CAA2BC,KAF7C,CAEKF,QAFL;AAGHG,QAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCN,KAAnC;AACAf,QAAAA,QAAQ,CAAC;AAAEsB,UAAAA,IAAI,EAAE,YAAR;AAAsBL,UAAAA;AAAtB,SAAD,CAAR;AACH;AACJ,KAxBL,EAyBKM,KAzBL,CAyBWC,GAAG,IAAI;AACVV,MAAAA,KAAK,CAAC,eAAD,CAAL;AACH,KA3BL;AA4BH,GApCD;AAsCH;AAED,OAAO,SAASW,MAAT,GAAkB;AACrB,SAAQzB,QAAD,IAAc;AACjBA,IAAAA,QAAQ,CAAC;AAAEsB,MAAAA,IAAI,EAAE,aAAR;AAAuBI,MAAAA,OAAO,EAAC;AAACD,QAAAA,MAAM,EAAC;AAAR;AAA/B,KAAD,CAAR;AACH,GAFD;AAIH","sourcesContent":["import api from \"./api\";\r\n\r\n//calls the login API\r\nexport function login(username, password) {\r\n\r\n    return (dispatch) => {\r\n        // const userInfo = {\r\n        //     email:email,\r\n        //     password:password\r\n        // }\r\n        // dispatch({ type: 'LOGIN_USER', payload:{email:email,password:password} });\r\n        // const token = \"dfasdfkasjdfkajsdkfjsk\";\r\n        // localStorage.setItem(\"user-token\", token);\r\n        fetch(\r\n            api+'/user/login',\r\n            {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    username: username,\r\n                    password: password\r\n                })\r\n            }\r\n        )\r\n            .then(response => response.json())\r\n            .then(responseData => {\r\n                console.log(responseData);\r\n                if (responseData.error) {\r\n                    alert('Invalid Login Credentials, Check your email or password!!!!')\r\n                } else {\r\n                    const { token } = responseData.data;\r\n                    const { userinfo } = responseData.data.userInfo.email\r\n                    localStorage.setItem(\"user-token\", token);\r\n                    dispatch({ type: 'LOGIN_USER', userinfo })\r\n                }\r\n            })\r\n            .catch(err => {\r\n                alert('Network Issue');\r\n            });\r\n    }\r\n\r\n}\r\n\r\nexport function logout() {\r\n    return (dispatch) => {\r\n        dispatch({ type: 'LOGOUT_USER', payload:{logout:false}});\r\n    }\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}